/*
 */
package swing.components.game.play.playarea;

import engine.cards.Card;
import engine.cards.Series;
import engine.players.Hand;
import java.util.LinkedList;
import java.util.List;
import swing.components.game.card.JButtonCard;

/**
 *
 * @author adam
 */
public class JPanelHand extends javax.swing.JPanel {

    private Hand handModel;
    private LinkedList<JButtonCard> jPanelButtonCardList;
    private static boolean isClassInitiated = false;

    /**
     * Creates new form JPanelHand
     */
    public JPanelHand() {
        if (!JPanelHand.isClassInitiated) {
            throw new RuntimeException("Can't instantiate JPanelHand before calling setAvailableSeries()!");
        }

        this.jPanelButtonCardList = new LinkedList<>();
        this.handModel = null;
        initComponents();
    }

    public LinkedList<JButtonCard> getjPanelButtonCardList() {
        return jPanelButtonCardList;
    }

    public void setHandModel(Hand handModel) {
        this.handModel = handModel;
    }

    public void refresh() {
        if (this.handModel == null) {
            throw new RuntimeException("JPanelHand needs a hand model! please call setHandModel().");
        }

        for (JButtonCard jButtonCard : jPanelButtonCardList) {
            this.remove(jButtonCard);
        }

        this.addButtonsFromHandModel();
        this.validate();
        this.repaint();
    }

    private void addButtonsFromHandModel() {
        this.jPanelButtonCardList = new LinkedList<>();

        for (Card card : this.handModel.getCards()) {
            this.jPanelButtonCardList.add(new JButtonCard(card));
        }
        for (JButtonCard jButtonCard : jPanelButtonCardList) {
            this.add(jButtonCard);
        }
    }

    public static void setAvailableSeries(List<Series> availableSeries) {
        JButtonCard.setAvailableSeries(availableSeries);
        JPanelHand.isClassInitiated = true;
    }

    public void setPlayerName(String name) {
        String title = name + "'s Hand";
        this.setBorder(javax.swing.BorderFactory.createTitledBorder(title));
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        setBorder(javax.swing.BorderFactory.createTitledBorder("Player's Hand"));
    }// </editor-fold>//GEN-END:initComponents
    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables
}
