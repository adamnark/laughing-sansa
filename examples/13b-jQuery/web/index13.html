<html>
    <head>
        <title></title>
        <script type="text/javascript"
        src="jquery-1.6.1.min.js"></script>
        <script type="text/javascript" language="javascript">

            $(document).ready(function() {
                // window.setTimeout(myTimerTask, 1000); // for a single timeout event
                window.setInterval(myTimerTask, 1000); // for periodical timeout events
            });

            function myTimerTask() {
                jQuery.ajax({
                    data: "",  // no data - can be ommitted
                    url: "ColorAjaxResponse",
                    timeout: 2000,
                    error: function() {
                        console.log("Failed to send ajax");
                    },
                    success: function(newColorJsonObject) {
                        changeBox(jQuery.parseJSON( newColorJsonObject ));
                    }
                });
            }

            function changeBox(newColorJsonObject) {
                var box = $("#box");
                box.removeClass();
                box.addClass("square");
                box.addClass(newColorJsonObject.color);
                $("h1", box).text(newColorJsonObject.height);
            }

        </script>
        <style type="text/css">
            .square {
                margin:10px;padding:12px;
                border:2px solid #666;
                width:60px;
            }
            .blue {
                background-color: blue;
            }
            .red {
                background-color: red;
            }
            .green {
                background-color: green;
            }
        </style>
    </head>
    <body>
        <p>Square below will change automatically, please be patient...</p>
        <div id="box" class="blue square">
            <h1>23</h1>
        </div>

        <a href="index.html">Home</a>

    </body>
</html>
